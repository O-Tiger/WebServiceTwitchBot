<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ® Twitch Bot Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <style>
      body {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      }
      .glass {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .glow {
        box-shadow: 0 0 20px rgba(145, 71, 255, 0.3);
      }
    </style>
  </head>
  <body class="min-h-screen text-gray-100">
    <!-- Navbar -->
    <nav class="glass border-b border-purple-500/20">
      <div class="container mx-auto px-4 py-4">
        <div class="flex justify-between items-center">
          <div class="flex items-center space-x-3">
            <span class="text-3xl">ğŸ®</span>
            <div>
              <h1
                class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent"
              >
                Twitch Bot Dashboard
              </h1>
              <p class="text-xs text-gray-400">Premium Edition v3.0</p>
            </div>
          </div>

          <div class="flex items-center space-x-4">
            <div id="status-indicator" class="flex items-center space-x-2">
              <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
              <span class="text-sm">Offline</span>
            </div>

            <!-- Menu Buttons -->
            <a href="/integrations" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition flex items-center gap-2 text-sm">
              <span>ğŸ”Œ</span>
              <span>IntegraÃ§Ãµes</span>
            </a>
            
            <a href="/help" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition flex items-center gap-2 text-sm">
              <span>â“</span>
              <span>Ajuda</span>
            </a>
            
            <a href="/logout" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition flex items-center gap-2 text-sm">
              <span>ğŸšª</span>
              <span>Sair</span>
            </a>
          </div>
        </div>
      </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
      <div class="grid grid-cols-12 gap-6">
        <!-- Sidebar - Streamers -->
        <div class="col-span-3">
          <div class="glass rounded-xl p-6 glow">
            <h2 class="text-xl font-bold mb-4 flex items-center">
              <span class="mr-2">ğŸ“º</span>
              STREAMERS
            </h2>

            <!-- Add Streamer -->
            <div class="mb-4">
              <div class="flex gap-2">
                <input
                  type="text"
                  id="new-streamer"
                  placeholder="username"
                  class="flex-1 bg-gray-800 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-purple-500 outline-none"
                />
                <button
                  onclick="addStreamer()"
                  class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg transition"
                >
                  â•
                </button>
              </div>
            </div>

            <!-- Streamers List -->
            <div id="streamers-list" class="space-y-2 max-h-96 overflow-y-auto">
              {% for streamer in streamers %}
              <div
                class="bg-gray-800/50 rounded-lg p-3 hover:bg-gray-700/50 transition"
                data-channel="{{ streamer.username }}"
              >
                <div class="flex items-center justify-between mb-2">
                  <span class="font-medium">{{ streamer.display_name }}</span>
                  <div class="flex items-center space-x-1">
                    {% if streamer.username in connected %}
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    {% else %}
                    <div class="w-2 h-2 bg-gray-500 rounded-full"></div>
                    {% endif %}
                  </div>
                </div>
                <div class="flex gap-2">
                  <button
                    onclick="toggleBot('{{ streamer.username }}')"
                    class="flex-1 text-xs py-1 rounded {% if streamer.username in connected %}bg-red-600 hover:bg-red-700{% else %}bg-green-600 hover:bg-green-700{% endif %} transition"
                  >
                    {% if streamer.username in connected %}ğŸ”Œ STOP{% else %}â–¶ï¸
                    START{% endif %}
                  </button>
                  <button
                    onclick="removeStreamer('{{ streamer.username }}')"
                    class="text-xs px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded transition"
                  >
                    ğŸ—‘ï¸
                  </button>
                </div>
              </div>
              {% endfor %}
            </div>

            <!-- Stats Summary -->
            <div class="mt-6 pt-4 border-t border-gray-700">
              <h3 class="text-sm font-bold mb-3">ğŸ“Š RESUMO</h3>
              <div id="stats-summary" class="text-xs space-y-1 text-gray-400">
                <div>ğŸ‘¥ UsuÃ¡rios: <span class="text-white">0</span></div>
                <div>ğŸ’¬ Mensagens: <span class="text-white">0</span></div>
                <div>ğŸ’° Pontos: <span class="text-white">0</span></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Content -->
        <div class="col-span-9 space-y-6">
          <!-- Stats Cards -->
          <div class="grid grid-cols-3 gap-4">
            <div class="glass rounded-xl p-6">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-400">Canais Ativos</p>
                  <p id="active-channels" class="text-3xl font-bold mt-2">0</p>
                </div>
                <div class="text-4xl">ğŸ“¡</div>
              </div>
            </div>

            <div class="glass rounded-xl p-6">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-400">Total UsuÃ¡rios</p>
                  <p id="total-users" class="text-3xl font-bold mt-2">0</p>
                </div>
                <div class="text-4xl">ğŸ‘¥</div>
              </div>
            </div>

            <div class="glass rounded-xl p-6">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-400">Mensagens</p>
                  <p id="total-messages" class="text-3xl font-bold mt-2">0</p>
                </div>
                <div class="text-4xl">ğŸ’¬</div>
              </div>
            </div>
          </div>

          <!-- Tabs -->
          <div class="glass rounded-xl overflow-hidden">
            <div class="flex border-b border-gray-700">
              <button
                onclick="switchTab('chat')"
                id="tab-chat"
                class="flex-1 px-6 py-4 font-medium bg-purple-600 hover:bg-purple-700 transition"
              >
                ğŸ’¬ Chat
              </button>
              <button
                onclick="switchTab('logs')"
                id="tab-logs"
                class="flex-1 px-6 py-4 font-medium hover:bg-gray-700/50 transition"
              >
                ğŸ“‹ Logs
              </button>
              <button
                onclick="switchTab('responses')"
                id="tab-responses"
                class="flex-1 px-6 py-4 font-medium hover:bg-gray-700/50 transition"
              >
                ğŸ¤– Auto Respostas
              </button>
            </div>

            <!-- Chat Tab -->
            <div id="content-chat" class="p-6">
              <div
                id="chat-messages"
                class="bg-gray-900/50 rounded-lg p-4 h-96 overflow-y-auto mb-4 font-mono text-sm"
              >
                <div class="text-gray-500 text-center py-8">
                  Conecte a um canal para ver mensagens...
                </div>
              </div>

            <div class="flex gap-2">
                <select
                  id="chat-channel"
                  class="bg-gray-800 rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-purple-500 transition"
                >
                  <option value="">Selecione canal...</option>
                  {% for channel in connected %}
                  <option value="{{ channel }}">ğŸ“º {{ channel }}</option>
                  {% endfor %}
                </select>
                <input
                  type="text"
                  id="chat-input"
                  placeholder="Digite sua mensagem..."
                  class="flex-1 bg-gray-800 rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-purple-500"
                />
                <button
                  onclick="sendMessage()"
                  class="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg transition font-medium"
                >
                  ğŸ“¤ Enviar
                </button>
              </div>
            </div>

            <!-- Logs Tab -->
            <div id="content-logs" class="p-6 hidden">
              <div
                id="log-messages"
                class="bg-gray-900/50 rounded-lg p-4 h-96 overflow-y-auto font-mono text-xs"
              ></div>
              <button
                onclick="clearLogs()"
                class="mt-4 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition text-sm"
              >
                ğŸ—‘ï¸ Limpar Logs
              </button>
            </div>

            <!-- Auto Responses Tab -->
            <div id="content-responses" class="p-6 hidden">
              <div
                class="bg-blue-900/20 border border-blue-500 rounded-lg p-4 mb-4"
              >
                <p class="text-blue-300 text-sm">
                  â„¹ï¸ As respostas sÃ£o salvas em
                  <code class="bg-gray-800 px-2 py-1 rounded"
                    >data/auto_responses.json</code
                  >
                  (arquivo separado)
                </p>
              </div>

              <div class="grid grid-cols-2 gap-4 mb-4">
                <input
                  type="text"
                  id="trigger-input"
                  placeholder="Gatilho (ex: oi)"
                  class="bg-gray-800 rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-purple-500"
                />
                <input
                  type="text"
                  id="response-input"
                  placeholder="Resposta (ex: tchau)"
                  class="bg-gray-800 rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-purple-500"
                />
              </div>
              <button
                onclick="addAutoResponse()"
                class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg transition mb-4"
              >
                â• Adicionar Resposta
              </button>

              <div
                id="responses-list"
                class="bg-gray-900/50 rounded-lg p-4 h-80 overflow-y-auto"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="../static/js/dashboard.js"></script>
  </body>
</html>